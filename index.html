<!doctype html>
<html lang="en">
<!--
Dielectric Runner - An Electrostatics Game
Copyright (C) 2026 Eric B. Lindgren

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed WITHOUT ANY WARRANTY; without even the implied
warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
See the LICENSE file (GPLv3) for details.
-->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dielectric Runner</title>

  <link rel="icon"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3E%3Crect width='16' height='16' fill='%23050510'/%3E%3Cpath d='M2 8c2-4 4-4 6 0s4 4 6 0' fill='none' stroke='%2300f3ff' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Press+Start+2P&display=swap"
    rel="stylesheet">

  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

  <link rel="stylesheet" href="style.css">
</head>

<body>

  <div class="wrap">
    <canvas id="c"></canvas>
    
    <!-- Touch zones: top = UP, bottom = DOWN (mobile) -->
    <div class="touch-controls" id="touchControls" aria-hidden="true">
      <div class="touch-zone" id="touchUp"></div>
      <div class="touch-zone" id="touchDown"></div>
    </div>

    <div class="ui-layer">
      <div class="hud-top">
        <div class="hud-panel">SCORE: <span id="uiScore">0</span></div>
        <div class="hud-panel">SPEED: <span id="uiSpeed">0</span></div>

        <div class="hud-panel physics-controls">
          <div class="slider-row" style="display:none">
            <label><span>Dielectric (E<sub>r</sub>)</span> <span id="valPol">1.0</span></label>
            <input id="sliderPol" type="range" min="0" max="300" value="100">
          </div>

          <div class="slider-row">
            <div style="color:var(--text); font-size: 11px;">NET FORCE (Y): <span id="uiField"
                style="color:var(--accent)">0</span> N</div>
          </div>
        </div>

      </div>

      <div class="controls-hint">
        [SPACE] Start/Restart &nbsp;|&nbsp; [UP/DOWN] Hover &nbsp;|&nbsp;
        <span style="color:#fff; text-shadow:0 0 5px #fff;">WHITE WALL = ATTRACTION TRAP</span>
      </div>
    </div>

    <div id="overlayStart" class="overlay">
      <h1>DIELECTRIC RUNNER</h1>
      <p class="subtitle">An Electrostatics Game</p>

      <button id="btnInfo" class="btn-info-corner">ABOUT</button>
      <input type="text" id="pName" class="name-input" placeholder="INSERT NAME" maxlength="8">

      <div class="audio-select-label">SOUND SYSTEM</div>
      <div class="audio-options">
        <button id="btnAudioRetro" class="btn-audio active">8-BIT CORE</button>
        <button id="btnAudioSpace" class="btn-audio">DEEP SPACE</button>
      </div>

      <button class="btn-start" id="btnStart">START</button>

      <div class="credits">
        <strong>Concept: Eric B. Lindgren</strong>
        Universidade Federal Fluminense<br>
        ericlindgren@id.uff.br<br>
        <a href="https://github.com/ericblindgren/dielectric-runner" target="_blank"
          style="color: inherit; text-decoration: underline; cursor: pointer;">
          https://github.com/ericblindgren/dielectric-runner
        </a> <br>
        v. 1.0
      </div>
    </div>

    <div id="overlayGO" class="overlay hidden">
      <h1 style="font-size:5rem; margin-bottom: 0;">GAME OVER</h1>
      <p class="subtitle" style="color: var(--danger); text-shadow: 0 0 10px var(--danger);">COLLISION DETECTED</p>

      <div class="highscores">
        <div class="hs-row header"><span>#</span><span>PILOT</span><span>SCORE</span></div>
        <div id="hsList">
          <div class="hs-row" style="color:#777">CONNECTING TO DATABASE...</div>
        </div>
      </div>

      <div class="btn-row">
        <button class="btn-start" id="btnRetry">RETRY ('SPACE')</button>
        <button class="btn-secondary" id="btnNewPilot">QUIT</button>
      </div>
    </div>

    <div id="overlayInfo" class="overlay hidden" style="z-index: 100;">
      <div class="info-content">
        <h2>MISSION BRIEFING / ABOUT</h2>

        <h3>How to Play</h3>
        <ul>
          <li><strong>Controls:</strong> Use [UP] and [DOWN] arrows to hover vertically.</li>
          <li><strong>Objective:</strong> Navigate the tunnel without touching the walls. Distance traveled equals your
            score.</li>
          <li><strong>The Trap:</strong> Watch the wall color. <span
              style="color:#00f3ff; font-weight:bold;">Cyan</span> indicates a positively charged wall and <span
              style="color:#ff0055; font-weight:bold;">red</span> indicates a negatively charged wall. <span
              style="color:#ffffff; font-weight:bold;">WHITE</span> indicates an "Attraction Trap".</li>
        </ul>

        <h3>Background Theory: Like-Charge Attraction</h3>
        <p>
          In classical electrostatics, two particles with the same charge sign repel each other according to Coulomb's
          Law. However, for finite-sized dielectric particles, the physics is far more complex.
        </p>
        <p>
          When charged dielectric particles approach, they induce surface charges on one another (polarization). If
          there is an asymmetry in the system, such as one particle being more highly charged or smaller than the other,
          the dominant particle exerts a strong polarizing influence. This induces a region of <em>opposite</em> charge
          on its neighbor.
        </p>
        <p>
          For like-charged particles, this geometry-dependent effect creates a short-range attractive force that can
          overcome the inherent Coulombic repulsion in some instances. In this game, getting too close to a positive
          wall with a high enough charge can trigger like-charge attraction, pulling your ship in right when you expect
          repulsion. Beware! If a <span style="color:#00f3ff; font-weight:bold;">cyan</span> wall turns <span
            style="color:#ffffff; font-weight:bold;">WHITE</span>, the interaction regime changes: repulsion becomes
          attraction.
        </p>

        <div class="citation">
          <strong>Reference:</strong><br>
          Lindgren, E. B. (2025). Charge-Induced Polarization in Dielectric Particle Systems: A Geometry-Dependent
          Effect. <em>Journal of Chemical Theory and Computation</em>, 21, 6135â€“6150.
        </div>

        <h3>License</h3>
        <p>
          Copyright (C) 2026 Eric B. Lindgren.
          This game is licensed under the GNU General Public License v3.0 or later.
          It comes with ABSOLUTELY NO WARRANTY.
        </p>
        <p>
          <a href="https://www.gnu.org/licenses/gpl-3.0.en.html" target="_blank" rel="license noopener noreferrer">GNU
            General Public License v3 (full text)</a>
        </p>

        <h3>Source Code</h3>
        <p>
          The complete corresponding source code for this game is available at:<br>
          <a href="https://github.com/ericblindgren/dielectric-runner" target="_blank" rel="noopener noreferrer">
            https://github.com/ericblindgren/dielectric-runner
          </a>
        </p>

        <h3>Third-Party Components</h3>
        <p>
          This game uses external libraries and fonts provided under their own licenses.
          These components are not covered by the GNU General Public License applied to this game.
        </p>

        <button id="btnCloseInfo" class="close-btn">CLOSE</button>
      </div>
    </div>
  </div>
  <script src="script.js"></script>
</body>
</html>